# 洛谷-P1553 数字反转（升级版）

> 原题链接：https://www.luogu.com.cn/problem/P1553

- [题目背景](#题目背景)
- [题目描述](#题目描述)
- [输入格式](#输入格式)
- [输出格式](#输出格式)
- [输入输出样例](#输入输出样例)
- [说明/提示](#说明/提示)
- [C++代码](#C++代码)

---

### <a name="题目背景">题目背景</a>

#### 以下为原题面，仅供参考

给定一个数，请将该数各个位上数字反转得到一个新数。

这次与NOIp2011普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。整数反转是将所有数位对调；小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分；分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母；百分数的分子一定是整数，百分数只改变数字部分。整数新数也应满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数的最高位数字不应为零；小数新数的末尾不为0（除非小数部分除了0没有别的数，那么只保留1个0）；分数不约分，分子和分母都不是小数（约分滴童鞋抱歉了，不能过哦。输入数据保证分母不为0），本次没有负数。

### <a name="题目描述">题目描述</a>

给定一个数，请将该数各个位上数字反转得到一个新数。

这次与NOIp2011普及组第一题不同的是：这个数可以是小数，分数，百分数，整数。

- 整数反转是将所有数位对调。
- 小数反转是把整数部分的数反转，再将小数部分的数反转，不交换整数部分与小数部分。
- 分数反转是把分母的数反转，再把分子的数反转，不交换分子与分母。
- 百分数的分子一定是整数，百分数只改变数字部分。

### <a name="输入格式">输入格式</a>

一个数 s

### <a name="输出格式">输出格式</a>

一个数，即 s 的反转数

### <a name="输入输出格式">输入输出格式</a>

#### 输入 #1

```c++
5087462
```

#### 输出 #1

```c++
2647805
```

#### 输入 #2

```c++
600.084
```

#### 输出 #2

```c++
6.48
```

#### 输入 #3

```c++
700/27
```

#### 输出 #3

```c++
7/72
```

#### 输入 #4

```c++
8670%
```

#### 输出 #4

```c++
768%
```

### <a name="说明/提示">说明/提示</a>

所有数据：25%s是整数，不大于20位

25%s是小数，整数部分和小数部分均不大于10位

25%s是分数，分子和分母均不大于10位

25%s是百分数，分子不大于19位

（20个数据）

数据保证：

- 对于整数翻转而言，整数原数和整数新数满足整数的常见形式，即除非给定的原数为零，否则反转后得到的新数和原来的数字的最高位数字不应为零。
- 对于小数翻转而言，其小数点前面部分同上，小数点后面部分的形式，保证满足小数的常见形式，也就是末尾没有多余的 0（小数部分除了 0 没有别的数，那么只保留 1 个 0。若反转之后末尾数字出现 0，请省略多余的 0）
- 对于分数翻转而言，分数不约分，分子和分母都不是小数。输入的分母不为0。与整数翻转相关规定见上。
- 对于百分数翻转而言，见与整数翻转相关内容。

数据不存在负数。

### <a name="C++代码">C++代码</a>

```c++
#include <iostream>
#include <cstring>
using namespace std;

char s[25];

void reversion(int i, int j) {
    for(int k=0;k<(j+1-i)/2;++k)
        swap(s[i+k],s[j-k]);
    for(;s[i]=='0'&&i<j;++i);
    for(;s[j]=='0'&&i<j;--j);
    for(;i<=j;++i)
        cout<<s[i];
}

int main() {
    cin>>s;
    int lens,i,idx;
    lens=strlen(s);
    idx=lens-1;
    if(s[idx]=='%')
    {
        reversion(0,lens-2);
        cout<<'%';
    }
    else {
        for(i=0;i<lens;++i)
            if(s[i]=='.'||s[i]=='/')
            {
                idx=i;
                break;
            }
        if(idx==lens-1)
            reversion(0,lens-1);
        else {
            reversion(0,idx-1);
            cout<<s[idx];
            reversion(idx+1,lens-1);
        }
    }
    cout<<endl;
    return 0;
}
```