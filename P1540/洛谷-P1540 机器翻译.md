# 洛谷-P1540 机器翻译

> 原题链接：https://www.luogu.com.cn/problem/P1540

- [题目背景](#题目背景)
- [题目描述](#题目描述)
- [输入格式](#输入格式)
- [输出格式](#输出格式)
- [输入输出样例](#输入输出样例)
- [说明/提示](#说明/提示)
- [C++代码](#C++代码)

---

### <a name="题目背景">题目背景</a>

小晨的电脑上安装了一个机器翻译软件，他经常用这个软件来翻译英语文章。

### <a name="题目描述">题目描述</a>

这个翻译软件的原理很简单，它只是从头到尾，依次将每个英文单词用对应的中文含义来替换。对于每个英文单词，软件会先在内存中查找这个单词的中文含义，如果内存中有，软件就会用它进行翻译；如果内存中没有，软件就会在外存中的词典内查找，查出单词的中文含义然后翻译，并将这个单词和译义放入内存，以备后续的查找和翻译。

假设内存中有 M 个单元，每单元能存放一个单词和译义。每当软件将一个新单词存入内存前，如果当前内存中已存入的单词数不超过 M−1，软件会将新单词存入一个未使用的内存单元；若内存中已存入 M 个单词，软件会清空最早进入内存的那个单词，腾出单元来，存放新单词。

假设一篇英语文章的长度为 N 个单词。给定这篇待译文章，翻译软件需要去外存查找多少次词典？假设在翻译开始前，内存中没有任何单词。

### <a name="输入格式">输入格式</a>

共 2 行。每行中两个数之间用一个空格隔开。

第一行为两个正整数 M,N，代表内存容量和文章的长度。

第二行为 N 个非负整数，按照文章的顺序，每个数（大小不超过 1000）代表一个英文单词。文章中两个单词是同一个单词，当且仅当它们对应的非负整数相同。

### <a name="输出格式">输出格式</a>

一个整数，为软件需要查词典的次数。

### <a name="输入输出样例">输入输出样例</a>

#### 输入 #

```c++
3 7
1 2 1 5 4 4 1
```

#### 输出 #1

```c++
5
```

### <a name="说明/提示">说明/提示</a>

#### 样例解释

整个查字典过程如下：每行表示一个单词的翻译，冒号前为本次翻译后的内存状况：

1. `1`：查找单词 1 并调入内存。
2. `1 2`：查找单词 2 并调入内存。
3. `1 2`：在内存中找到单词 1。
4. `1 2 5`：查找单词 5 并调入内存。
5. `2 5 4`：查找单词 4 并调入内存替代单词 1。
6. `2 5 4`：在内存中找到单词 4。
7. `5 4 1`：查找单词 1 并调入内存替代单词 2。

共计查了 5 次词典。

#### 数据范围

- 对于 10% 的数据有 M=1，N≤5；
- 对于 100% 的数据有 1≤M≤100，1≤N≤1000。

### <a name="C++代码">C++代码</a>

```c++
#include <iostream>
#include <cstring>
using namespace std;

int main() {
    int m,n,i,j,k=0,flag,ans=0;
    cin>>m>>n;
    int p[n],buffer[m];
    memset(buffer,-1,sizeof(buffer));
    for(i=0;i<n;++i)
        cin>>p[i];
    for(i=0;i<n;++i) {
        flag=0;
        for(j=0;j<m&&buffer[j]!=-1;++j)
            if(p[i]==buffer[j]) {
                flag=1;
                break;
            }
        if(flag==0) {
            if(k>=m)
                k%=m;
            buffer[k++]=p[i];
            ++ans;
        }
    }
    cout<<ans<<endl;
    return 0;
}
```