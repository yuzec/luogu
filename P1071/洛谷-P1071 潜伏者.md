# 洛谷-P1071 潜伏者

> 原题链接：https://www.luogu.com.cn/problem/P1071

- [题目描述](#题目描述)
- [输入格式](#输入格式)
- [输出格式](#输出格式)
- [输入输出样例](#输入输出样例)
- [说明/提示](#说明/提示)
- [C++代码](#C++代码)

---

### <a name="题目描述">题目描述</a>

R国和S国正陷入战火之中，双方都互派间谍，潜入对方内部，伺机行动。历尽艰险后，潜伏于S国的R国间谍小C终于摸清了 S 国军用密码的编码规则：

1． S国军方内部欲发送的原信息经过加密后在网络上发送，原信息的内容与加密后所得的内容均由大写字母‘A’-‘Z’构成（无空格等其他字符）。

2． S国对于每个字母规定了对应的“密字”。加密的过程就是将原信息中的所有字母替换为其对应的“密字”。

3． 每个字母只对应一个唯一的“密字”，不同的字母对应不同的“密字”。“密字”可以和原字母相同。

例如，若规定‘A’的密字为‘A’，‘B’的密字为‘C’（其他字母及密字略），则原信息“ABA”被加密为“ACA”。

现在，小C 通过内线掌握了S 国网络上发送的一条加密信息及其对应的原信息。小C希望能通过这条信息，破译S 国的军用密码。小 C 的破译过程是这样的：扫描原信息，对于原信息中的字母x（代表任一大写字母），找到其在加密信息中的对应大写字母y，并认为在密码里 y是x的密字。如此进行下去直到停止于如下的某个状态：

1． 所有信息扫描完毕，‘A’-‘Z’ 所有 26个字母在原信息中均出现过并获得了相应的“密字”。

2． 所有信息扫描完毕，但发现存在某个（或某些）字母在原信息中没有出现。

3． 扫描中发现掌握的信息里有明显的自相矛盾或错误（违反 S 国密码的编码规则）。例

如某条信息“XYZ”被翻译为“ABA”就违反了“不同字母对应不同密字”的规则。

在小 C 忙得头昏脑涨之际，R 国司令部又发来电报，要求他翻译另外一条从 S国刚刚截取到的加密信息。现在请你帮助小C：通过内线掌握的信息，尝试破译密码。然后利用破译的密码，翻译电报中的加密信息。

### <a name="输入格式">输入格式</a>

共 3行，每行为一个长度在 1到 100之间的字符串。

第 1 行为小 C 掌握的一条加密信息。

第2 行为第 1 行的加密信息所对应的原信息。

第 3行为 R国司令部要求小C 翻译的加密信息。

输入数据保证所有字符串仅由大写字母‘A’-‘Z’构成，且第 1行长度与第 2行相等。

### <a name="输出格式">输出格式</a>

共 1 行。

若破译密码停止时出现 2,3 两种情况，请你输出“Failed”（不含引号，注意首字母大写，其它小写）。

否则请输出利用密码翻译电报中加密信息后得到的原信息。

### <a name="输入输出样例">输入输出样例</a>

#### 输入 #1

```c++
AA 
AB 
EOWIE
```

#### 输出 #1

```c++
Failed
```

#### 输入 #2

```c++
QWERTYUIOPLKJHGFDSAZXCVBN 
ABCDEFGHIJKLMNOPQRSTUVWXY 
DSLIEWO
```

#### 输出 #2

```c++
Failed 
```

#### 输入 #3

```c++
MSRTZCJKPFLQYVAWBINXUEDGHOOILSMIJFRCOPPQCEUNYDUMPP
YIZSDWAHLNOVFUCERKJXQMGTBPPKOIYKANZWPLLVWMQJFGQYLL
FLSO 
```

#### 输出 #3

```c++
NOIP
```

### <a name="说明/提示">说明/提示</a>

【输入输出样例1说明】

原信息中的字母‘A’和‘B’对应相同的密字，输出“Failed”。

【输入输出样例 2说明】

字母‘Z’在原信息中没有出现，输出“Failed”。

NOIP 2009 提高组 第一题

### <a name="C++代码">C++代码</a>

```c++
#include <iostream>
#include <cstring>
#include <map>
using namespace std;

int main() {
    string a,b,c;
    cin>>a>>b>>c;
    map<char,char> m,t;
    for(int i=0;i<a.size();++i) {
        if(m[a[i]]&&m[a[i]]!=b[i]) {
            cout<<"Failed"<<endl;
            return 0;
        }
        if(t[b[i]]&&t[b[i]]!=a[i]) {
            cout<<"Failed"<<endl;
            return 0;
        }
        m[a[i]]=b[i];
        t[b[i]]=a[i];
    }
    if(m.size()<26) {
        cout<<"Failed"<<endl;
        return 0;
    }
    for(int i=0;i<c.size();++i)
        c[i]=m[c[i]];
    cout<<c<<endl;
    return 0;
}
```