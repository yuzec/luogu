# 洛谷-P1056 排座椅

> 原题链接：https://www.luogu.com.cn/problem/P1056

- [题目描述](#题目描述)
- [输入格式](#输入格式)
- [输出格式](#输出格式)
- [输入输出样例](#输入输出样例)
- [说明/提示](#说明/提示)
- [C++代码](#C++代码)

---

### <a name="题目描述">题目描述</a>

上课的时候总会有一些同学和前后左右的人交头接耳，这是令小学班主任十分头疼的一件事情。不过，班主任小雪发现了一些有趣的现象，当同学们的座次确定下来之后，只有有限的 D 对同学上课时会交头接耳。

同学们在教室中坐成了 M 行 N 列，坐在第 i 行第 j 列的同学的位置是 (i,j)，为了方便同学们进出，在教室中设置了 K 条横向的通道，L 条纵向的通道。

于是，聪明的小雪想到了一个办法，或许可以减少上课时学生交头接耳的问题：她打算重新摆放桌椅，改变同学们桌椅间通道的位置，因为如果一条通道隔开了 2 个会交头接耳的同学，那么他们就不会交头接耳了。

请你帮忙给小雪编写一个程序，给出最好的通道划分方案。在该方案下，上课时交头接耳的学生的对数最少。

### <a name="输入格式">输入格式</a>

第一行，有 5 个用空格隔开的整数，分别是 M,N,K,L,D(2≤N,M≤1000,0≤K<M,0≤L<N,D≤2000)。

接下来的 D 行，每行有 4 个用空格隔开的整数。第 i 行的 4 个整数 $X_i,Y_i,P_i,Q_i$，表示坐在位置 $(X_i,Y_i)$ 与 $(P_i,Q_i)$ 的两个同学会交头接耳（输入保证他们前后相邻或者左右相邻）。

输入数据保证最优方案的唯一性。

### <a name="输出格式">输出格式</a>

共两行。
 第一行包含 K 个整数 $a_1,a_2,\ldots,a_K$，表示第 $a_1$​ 行和 $a_1+1$ 行之间、第 $a_2$​ 行和 $a_2+1$ 行之间、…、第 $a_K$​ 行和第 $a_K+1$ 行之间要开辟通道，其中 $a_i< a_{i+1}$​，每两个整数之间用空格隔开（行尾没有空格）。

第二行包含 L 个整数 $b_1,b_2,\ldots,b_L$，表示第 $b_1$ 列和 $b_1+1$ 列之间、第 $b_2$ 列和 $b_2+1$ 列之间、…、第 $b_L$ 列和第 $b_L+1$ 列之间要开辟通道，其中$b_i< b_{i+1}$，每两个整数之间用空格隔开（列尾没有空格）。

### <a name="输入输出样例">输入输出样例</a>

#### 输入 #1

```c++
4 5 1 2 3
4 2 4 3
2 3 3 3
2 5 2 4
```

#### 输出 #1

```c++
2
2 4
```

### <a name="说明/提示">说明/提示</a>

![img](https://cdn.luogu.com.cn/upload/pic/20.png)

上图中用符号*、※、+标出了 3 对会交头接耳的学生的位置，图中 3 条粗线的位置表示通道，图示的通道划分方案是唯一的最佳方案。

2008 年普及组第二题

### <a name="C++代码">C++代码</a>

```c++
#include <iostream>
using namespace std;

int main() {
    int m,n,k,l,d,i,j,idx;
    cin>>m>>n>>k>>l>>d;
    int D[d][4],M[m]={0},N[n]={0},K[m]={0},L[n]={0};
    for(i=0;i<d;++i)
        for(j=0;j<4;++j)
            cin>>D[i][j];
    for(i=0;i<d;++i)
        if(D[i][0]==D[i][2])
            ++N[min(D[i][1],D[i][3])];
        else
            ++M[min(D[i][0],D[i][2])];
    for(i=0;i<k;++i) {
        for(idx=1,j=2;j<m;++j)
            if(M[j]>M[idx])
                idx=j;
        K[idx]=1;
        M[idx]=0;
    }
    for(i=0;i<l;++i) {
        for(idx=1,j=2;j<n;++j)
            if(N[j]>N[idx])
                idx=j;
        L[idx]=1;
        N[idx]=0;
    }
    for(i=1;i<m;++i)
        if(K[i]==1) {
            cout<<i;
            if(--k)
                cout<<' ';
        }
    cout<<endl;
    for(i=1;i<n;++i)
        if(L[i]==1) {
            cout<<i;
            if(--l)
            cout<<' ';
        }
    cout<<endl;
    return 0;
}
```