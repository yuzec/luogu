# 洛谷-P1057 传球游戏

> 原题链接：https://www.luogu.com.cn/problem/P1057

- [题目描述](#题目描述)
- [输入格式](#输入格式)
- [输出格式](#输出格式)
- [输入输出样例](#输入输出样例)
- [说明/提示](#说明/提示)
- [C++代码](#C++代码)

---

### <a name="题目描述">题目描述</a>

上体育课的时候，小蛮的老师经常带着同学们一起做游戏。这次，老师带着同学们一起做传球游戏。

游戏规则是这样的：n个同学站成一个圆圈，其中的一个同学手里拿着一个球，当老师吹哨子时开始传球，每个同学可以把球传给自己左右的两个同学中的一个（左右任意），当老师再次吹哨子时，传球停止，此时，拿着球没有传出去的那个同学就是败者，要给大家表演一个节目。

聪明的小蛮提出一个有趣的问题：有多少种不同的传球方法可以使得从小蛮手里开始传的球，传了m次以后，又回到小蛮手里。两种传球方法被视作不同的方法，当且仅当这两种方法中，接到球的同学按接球顺序组成的序列是不同的。比如有三个同学1号、2号、3号，并假设小蛮为1号，球传了3次回到小蛮手里的方式有1->2->3->1和1->3->2->1，共2种。

### <a name="输入格式">输入格式</a>

一行，有两个用空格隔开的整数$n,m(3 \le n \le 30,1 \le m \le 30)$。

### <a name="输出格式">输出格式</a>

1个整数，表示符合题意的方法数。

### <a name="输入输出样例">输入输出样例</a>

#### 输入 #1

```c++
3 3
```

#### 输出 #1

```c++
2
```

### <a name="说明/提示">说明/提示</a>

40%的数据满足：$3 \le n \le 30,1 \le m \le 20$

100%的数据满足：$3 \le n \le 30,1 \le m \le 30$

2008普及组第三题

### <a name="C++代码">C++代码</a>

```c++
#include <iostream>
using namespace std;

int n,m,a[31][31];

int solve(int x, int k) {
    if(k==m) {
        if(x==0)
            return 1;
        return 0;
    }
    if(a[x][k]!=-1)
        return a[x][k];
    int l=(x+1)%n,r=(x+n-1)%n;
    if(a[l][k+1]==-1)
        a[l][k+1]=solve(l,k+1);
    if(a[r][k+1]==-1)
        a[r][k+1]=solve(r,k+1);
    a[x][k]=a[l][k+1]+a[r][k+1];
    return a[x][k];
}

int main() {
    cin>>n>>m;
    for(int i=0;i<n;++i)
        for(int j=0;j<=m;++j)
            a[i][j]=-1;
    cout<<solve(0,0)<<endl;
    return 0;
}
```